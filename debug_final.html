<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ”§ Debug Final - Simple Test</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      .btn {
        background: #10b981;
        color: white;
        padding: 15px 25px;
        border: none;
        border-radius: 8px;
        margin: 10px;
        cursor: pointer;
        font-size: 16px;
      }
      .btn:hover {
        background: #059669;
      }
      .btn.danger {
        background: #ef4444;
      }
      .btn.danger:hover {
        background: #dc2626;
      }
      .log {
        background: #f3f4f6;
        color: #374151;
        font-family: monospace;
        padding: 10px;
        border-radius: 5px;
        margin: 5px 0;
        font-size: 12px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ”§ Debug Final - Simple Test</h1>

      <div
        style="
          background: #f3f4f6;
          padding: 20px;
          border-radius: 8px;
          margin: 20px 0;
        "
      >
        <h3>ğŸ§ª Quick Tests</h3>
        <button class="btn" onclick="testSweetAlert()">Test SweetAlert2</button>
        <button class="btn" onclick="testForm()">Test Form Submission</button>
        <button class="btn danger" onclick="runAllTests()">
          ğŸš€ Run All Tests
        </button>
      </div>

      <div
        style="
          background: #f3f4f6;
          padding: 20px;
          border-radius: 8px;
          margin: 20px 0;
        "
      >
        <h3>ğŸ“ Console Log</h3>
        <div id="console-log"></div>
        <button class="btn" onclick="clearLog()">Clear Log</button>
      </div>

      <div
        id="results"
        style="
          background: #f3f4f6;
          padding: 20px;
          border-radius: 8px;
          margin: 20px 0;
        "
      >
        <h3>ğŸ“Š Results</h3>
        <div id="test-results">Click "Run All Tests" to start</div>
      </div>
    </div>

    <script>
      let testCount = 0;

      function log(message, type = "info") {
        const logDiv = document.getElementById("console-log");
        const timestamp = new Date().toLocaleTimeString();
        const logEntry = document.createElement("div");
        logEntry.className = `log ${type}`;
        logEntry.innerHTML = `[${timestamp}] ${message}`;
        logDiv.appendChild(logEntry);
        logDiv.scrollTop = logDiv.scrollHeight;
      }

      function testSweetAlert() {
        log("Testing SweetAlert2...", "info");
        if (typeof Swal !== "undefined") {
          log("âœ… SweetAlert2 loaded", "success");
          Swal.fire("Test", "SweetAlert2 working!", "success");
          return true;
        } else {
          log("âŒ SweetAlert2 not loaded", "error");
          return false;
        }
      }

      function testForm() {
        log("Testing form submission simulation...", "info");

        // Simulate form submission with confirmation
        Swal.fire({
          title: "Test Form",
          text: "Simulating form submission...",
          icon: "question",
          showCancelButton: true,
          confirmButtonText: "Ya, Submit!",
          cancelButtonText: "Batal",
        }).then((result) => {
          if (result.isConfirmed) {
            log("âœ… User confirmed form submission", "success");

            // Simulate success
            Swal.fire({
              icon: "success",
              title: "Berhasil!",
              text: "Form submission test successful!",
              confirmButtonColor: "#10b981",
            });
          } else {
            log("â„¹ï¸ User cancelled form submission", "info");
          }
        });

        return true;
      }

      function runAllTests() {
        log("ğŸš€ Running all tests...", "info");
        testCount = 0;

        if (testSweetAlert()) testCount++;
        if (testForm()) testCount++;

        const results = document.getElementById("test-results");
        if (testCount === 2) {
          results.innerHTML = `
                    <div style="background: #d1fae5; color: #065f46; padding: 15px; border-radius: 5px;">
                        <h3>ğŸ¯ All Tests Passed: ${testCount}/2</h3>
                        <p>JavaScript functionality is working correctly!</p>
                        <p><strong>Jika masih ada masalah di halaman pembelian/penjualan:</strong></p>
                        <ul>
                            <li>Check browser console untuk error</li>
                            <li>Check Network tab saat submit form</li>
                            <li>Pastikan CSRF token valid</li>
                            <li>Pastikan database connection OK</li>
                        </ul>
                    </div>
                `;
          log("ğŸ‰ All tests passed!", "success");
        } else {
          results.innerHTML = `
                    <div style="background: #fee2e2; color: #991b1b; padding: 15px; border-radius: 5px;">
                        <h3>âŒ Some Tests Failed: ${testCount}/2</h3>
                        <p>Check the log above for details.</p>
                    </div>
                `;
          log(`âŒ Some tests failed: ${testCount}/2`, "error");
        }
      }

      function clearLog() {
        document.getElementById("console-log").innerHTML = "";
        log("Log cleared", "info");
      }

      document.addEventListener("DOMContentLoaded", function () {
        log("Debug page loaded successfully", "success");
        log(
          "SweetAlert2 status: " +
            (typeof Swal !== "undefined" ? "Loaded" : "Not Loaded"),
          "info"
        );
      });
    </script>
  </body>
</html>
